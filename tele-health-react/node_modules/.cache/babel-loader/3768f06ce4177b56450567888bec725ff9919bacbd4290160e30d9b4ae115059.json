{"ast":null,"code":"import _slicedToArray from\"D:/tele-health/tele-health-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import Form from'react-bootstrap/Form';import{useContext,useState}from'react';import{AppContext}from'./App';import axios from'axios';import{BASEURL}from'./baseURL';import{Button}from'react-bootstrap';import encrypt from'./encrypt';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function UploadImageButton(_ref){var imageList=_ref.imageList,setImageList=_ref.setImageList;var _useContext=useContext(AppContext),patientId=_useContext.patientId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),image=_useState2[0],setImage=_useState2[1];function sendFile(){var res=encrypt(image,function(result){var _result=_slicedToArray(result,2),encryptedImage=_result[0],key=_result[1];var formData=new FormData();formData.append(\"image\",encryptedImage,image.name);formData.append(\"patientProfile\",patientId);formData.append(\"key\",key);axios.post(BASEURL+\"/profile/image_list/\",formData,{headers:{\"Content-Type\":\"multipart/form-data\"}}).then(function(response){console.log(response);}).catch(function(error){console.log(error);});});}return/*#__PURE__*/_jsxs(Form.Group,{controlId:\"formFile\",className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Upload Image\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",accept:\"image/*\",onChange:function onChange(e){setImage(e.target.files[0]);}}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"mb-3\",type:\"submit\",onClick:function onClick(e){return sendFile(e);},children:\"Upload\"})]});}export default UploadImageButton;// encrypt input = File with name and type\n// encrypt output = blob\n// decrypt api output -> image url without server root, key","map":{"version":3,"names":["React","Form","useContext","useState","AppContext","axios","BASEURL","Button","encrypt","jsx","_jsx","jsxs","_jsxs","UploadImageButton","_ref","imageList","setImageList","_useContext","patientId","_useState","_useState2","_slicedToArray","image","setImage","sendFile","res","result","_result","encryptedImage","key","formData","FormData","append","name","post","headers","then","response","console","log","catch","error","Group","controlId","className","children","Label","Control","type","accept","onChange","e","target","files","variant","onClick"],"sources":["D:/tele-health/tele-health-react/src/UploadImageButton.js"],"sourcesContent":["import React from 'react'\r\nimport Form from 'react-bootstrap/Form';\r\nimport { useContext, useState } from 'react';\r\nimport { AppContext } from './App';\r\nimport axios from 'axios';\r\nimport { BASEURL } from './baseURL';\r\nimport { Button } from 'react-bootstrap';\r\nimport encrypt from './encrypt';\r\n\r\nfunction UploadImageButton( {imageList, setImageList} ) {\r\n\r\n  const {patientId} = useContext(AppContext);\r\n  const [image, setImage] = useState(null);\r\n\r\n  function sendFile()\r\n  {\r\n      const res = encrypt(image, (result) =>{\r\n      const [encryptedImage, key] = result;\r\n      const formData = new FormData();\r\n      formData.append(\"image\", encryptedImage, image.name);\r\n      formData.append(\"patientProfile\", patientId);\r\n      formData.append(\"key\", key);\r\n      axios.post(BASEURL+\"/profile/image_list/\", formData, {\r\n        headers: { \"Content-Type\": \"multipart/form-data\" },\r\n      }).then(function (response) {\r\n        console.log(response);\r\n      })\r\n      .catch(function (error) {\r\n        console.log(error);\r\n    });\r\n    });\r\n  }\r\n\r\n\r\n  return (\r\n    <Form.Group controlId=\"formFile\" className=\"mb-3\">\r\n      <Form.Label>Upload Image</Form.Label>\r\n      <Form.Control \r\n          type=\"file\" \r\n          accept=\"image/*\" \r\n          onChange={(e)=>{\r\n            setImage(e.target.files[0]);\r\n            }\r\n          }/>\r\n        <Button\r\n          variant=\"primary\" \r\n          className=\"mb-3\"\r\n          type=\"submit\"\r\n          onClick= {(e)=>sendFile(e)}>\r\n          Upload\r\n        </Button>\r\n    </Form.Group>\r\n  )\r\n}\r\n\r\nexport default UploadImageButton\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// encrypt input = File with name and type\r\n// encrypt output = blob\r\n\r\n\r\n\r\n// decrypt api output -> image url without server root, key"],"mappings":"sHAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,OAASC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAC5C,OAASC,UAAU,KAAQ,OAAO,CAClC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,WAAW,CACnC,OAASC,MAAM,KAAQ,iBAAiB,CACxC,MAAO,CAAAC,OAAO,KAAM,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEhC,QAAS,CAAAC,iBAAiBA,CAAAC,IAAA,CAA8B,IAA3B,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CAAEC,YAAY,CAAAF,IAAA,CAAZE,YAAY,CAElD,IAAAC,WAAA,CAAoBf,UAAU,CAACE,UAAU,CAAC,CAAnCc,SAAS,CAAAD,WAAA,CAATC,SAAS,CAChB,IAAAC,SAAA,CAA0BhB,QAAQ,CAAC,IAAI,CAAC,CAAAiB,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAjCG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IAEtB,QAAS,CAAAI,QAAQA,CAAA,CACjB,CACI,GAAM,CAAAC,GAAG,CAAGjB,OAAO,CAACc,KAAK,CAAE,SAACI,MAAM,CAAI,CACtC,IAAAC,OAAA,CAAAN,cAAA,CAA8BK,MAAM,IAA7BE,cAAc,CAAAD,OAAA,IAAEE,GAAG,CAAAF,OAAA,IAC1B,GAAM,CAAAG,QAAQ,CAAG,GAAI,CAAAC,QAAQ,EAAE,CAC/BD,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAEJ,cAAc,CAAEN,KAAK,CAACW,IAAI,CAAC,CACpDH,QAAQ,CAACE,MAAM,CAAC,gBAAgB,CAAEd,SAAS,CAAC,CAC5CY,QAAQ,CAACE,MAAM,CAAC,KAAK,CAAEH,GAAG,CAAC,CAC3BxB,KAAK,CAAC6B,IAAI,CAAC5B,OAAO,CAAC,sBAAsB,CAAEwB,QAAQ,CAAE,CACnDK,OAAO,CAAE,CAAE,cAAc,CAAE,qBAAsB,CACnD,CAAC,CAAC,CAACC,IAAI,CAAC,SAAUC,QAAQ,CAAE,CAC1BC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACvB,CAAC,CAAC,CACDG,KAAK,CAAC,SAAUC,KAAK,CAAE,CACtBH,OAAO,CAACC,GAAG,CAACE,KAAK,CAAC,CACtB,CAAC,CAAC,CACF,CAAC,CAAC,CACJ,CAGA,mBACE7B,KAAA,CAACX,IAAI,CAACyC,KAAK,EAACC,SAAS,CAAC,UAAU,CAACC,SAAS,CAAC,MAAM,CAAAC,QAAA,eAC/CnC,IAAA,CAACT,IAAI,CAAC6C,KAAK,EAAAD,QAAA,CAAC,cAAY,EAAa,cACrCnC,IAAA,CAACT,IAAI,CAAC8C,OAAO,EACTC,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,SAAS,CAChBC,QAAQ,CAAE,SAAAA,SAACC,CAAC,CAAG,CACb5B,QAAQ,CAAC4B,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CAC3B,CACD,EAAE,cACL3C,IAAA,CAACH,MAAM,EACL+C,OAAO,CAAC,SAAS,CACjBV,SAAS,CAAC,MAAM,CAChBI,IAAI,CAAC,QAAQ,CACbO,OAAO,CAAG,SAAAA,QAACJ,CAAC,QAAG,CAAA3B,QAAQ,CAAC2B,CAAC,CAAC,EAAC,CAAAN,QAAA,CAAC,QAE9B,EAAS,GACA,CAEjB,CAEA,cAAe,CAAAhC,iBAAiB,CAQhC;AACA;AAIA"},"metadata":{},"sourceType":"module","externalDependencies":[]}