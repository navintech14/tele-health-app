{"ast":null,"code":"import _regeneratorRuntime from\"D:/tele-health/tele-health-react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/tele-health/tele-health-react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/tele-health/tele-health-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useContext}from'react';import Form from'react-bootstrap/Form';import Button from'react-bootstrap/Button';import{useNavigate,Link}from'react-router-dom';import axios from'axios';import{BASEURL}from'./baseURL';import{AppContext}from'./App';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useContext=useContext(AppContext),isDoctor=_useContext.isDoctor,setIsDoctor=_useContext.setIsDoctor,id=_useContext.id,setId=_useContext.setId,loggedIn=_useContext.loggedIn,setLoggedIn=_useContext.setLoggedIn;var navigate=useNavigate();function LoginUser(){return _LoginUser.apply(this,arguments);}function _LoginUser(){_LoginUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:axios.post(BASEURL+\"/auth/jwt/create/\",{username:username,password:password}).then(function(response){localStorage.setItem(\"access\",JSON.stringify(response.data[\"access\"]));localStorage.setItem(\"refresh\",JSON.stringify(response.data[\"refresh\"]));axios.get(BASEURL+\"/auth/users/me/\",{headers:{authorization:\"JWT \"+JSON.parse(localStorage.getItem(\"access\"))}}).then(function(response){console.log(response.data);setLoggedIn(true);setIsDoctor(response.data[\"isDoctor\"]);setId(response.data[\"id\"]);response.data[\"isDoctor\"]?navigate(\"/home_page_doctor\"):navigate(\"/home_page_patient\");}).catch(function(error){console.log(error);});}).catch(function(error){console.log(error);});case 1:case\"end\":return _context.stop();}},_callee);}));return _LoginUser.apply(this,arguments);}return/*#__PURE__*/_jsxs(Form,{style:{margin:10},children:[/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"LoginForm.username\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Username\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",placeholder:\"Username\",required:true,onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",controlId:\"LoginForm.password\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"password\",placeholder:\"Password\",required:true,onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",className:\"mb-3\",type:\"submit\",onClick:function onClick(e){e.preventDefault();LoginUser();},children:\"Login\"}),/*#__PURE__*/_jsx(Link,{className:\"mb-3\",to:\"/register\",children:\"Register\"})]});}export default LoginForm;","map":{"version":3,"names":["useState","useContext","Form","Button","useNavigate","Link","axios","BASEURL","AppContext","jsx","_jsx","jsxs","_jsxs","LoginForm","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useContext","isDoctor","setIsDoctor","id","setId","loggedIn","setLoggedIn","navigate","LoginUser","_LoginUser","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","post","then","response","localStorage","setItem","JSON","stringify","data","get","headers","authorization","parse","getItem","console","log","catch","error","stop","style","margin","children","Group","className","controlId","Label","Control","type","placeholder","required","onChange","e","target","value","variant","onClick","preventDefault","to"],"sources":["D:/tele-health/tele-health-react/src/LoginForm.js"],"sourcesContent":["import { useState, useContext } from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { BASEURL } from './baseURL';\r\nimport { AppContext } from './App';\r\n\r\nfunction LoginForm(){\r\n\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  const {isDoctor, setIsDoctor, id, setId, loggedIn, setLoggedIn} = useContext(AppContext);\r\n  \r\n\r\n  const navigate = useNavigate();\r\n\r\n\r\n  async function  LoginUser(){\r\n    axios.post(BASEURL + \"/auth/jwt/create/\",{\r\n      username: username,\r\n      password: password\r\n    }).then(function (response) {\r\n      localStorage.setItem(\"access\",JSON.stringify(response.data[\"access\"]));\r\n      localStorage.setItem(\"refresh\",JSON.stringify(response.data[\"refresh\"]));\r\n        axios.get(BASEURL + \"/auth/users/me/\",{\r\n          headers: {\r\n            authorization: \"JWT \"+ JSON.parse(localStorage.getItem(\"access\"))\r\n          }\r\n        }).then(function (response) {\r\n          console.log(response.data);\r\n          setLoggedIn(true);\r\n          setIsDoctor(response.data[\"isDoctor\"]);\r\n          setId((response.data[\"id\"]));\r\n          response.data[\"isDoctor\"] ? navigate(\"/home_page_doctor\") : navigate(\"/home_page_patient\");\r\n        }).catch(function (error) { \r\n          console.log(error);\r\n        });\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n  }\r\n\r\n  return(\r\n    <Form style={\r\n      {margin: 10}\r\n    }>\r\n\r\n    <Form.Group className=\"mb-3\" controlId=\"LoginForm.username\">\r\n      <Form.Label>Username</Form.Label>\r\n      <Form.Control\r\n          type= \"text\"\r\n          placeholder=\"Username\"\r\n          required\r\n          onChange={(e) => setUsername(e.target.value)}\r\n        />\r\n    </Form.Group>\r\n\r\n    <Form.Group className=\"mb-3\" controlId=\"LoginForm.password\">\r\n      <Form.Label>Password</Form.Label>\r\n      <Form.Control\r\n          type= \"password\"\r\n          placeholder=\"Password\"\r\n          required\r\n          onChange={(e) => setPassword(e.target.value)}\r\n      />\r\n    </Form.Group>\r\n\r\n    <Button \r\n      variant=\"primary\" \r\n      className=\"mb-3\" \r\n      type=\"submit\"\r\n      onClick={(e) => {\r\n        e.preventDefault(); \r\n        LoginUser();\r\n       }}>\r\n        Login\r\n    </Button>\r\n    <Link className=\"mb-3\" to='/register'>\r\n        Register\r\n    </Link>\r\n\r\n    </Form>\r\n  );\r\n}\r\n\r\nexport default LoginForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}